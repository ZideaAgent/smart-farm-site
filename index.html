<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFarm - Smart Irrigation System</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">
                <div class="logo">
                    <i class="fas fa-leaf"></i>
                    <span>SmartFarm</span>
                </div>
            </a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="dashboard.html">Dashboard</a>
                <a href="pump.html">Pump Control</a>
                <a href="crop-prediction.html">Crop Prediction</a>
                <a href="disease-detection.html">Disease Detection</a>
                <a href="about.html">About Us</a>
            </div>
            <div class="auth-controls">
                <span id="greeting" class="text-white mr-4"></span>
                <button id="logoutBtn" class="btn btn-secondary hidden">Logout</button>
            </div>
        </div>
    </nav>

    <div class="hero-section">
        <div class="hero-content">
            <h1 id="mainHeading">Smart Irrigation System</h1>
            <p>Monitor and control your farm's irrigation system with real-time data and automated solutions.</p>
            <a href="dashboard.html" class="btn btn-primary">View Dashboard</a>
        </div>
        <div class="hero-image">
            <img src="https://images.unsplash.com/photo-1625246333195-78d9c38ad449?ixlib=rb-4.0.3" alt="Smart Farm">
        </div>
    </div>

    <div class="features-section">
        <h2>Key Features</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>Real-time Monitoring</h3>
                <p>Monitor soil moisture, temperature, and humidity in real-time with our advanced sensors.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-tint"></i>
                </div>
                <h3>Automated Irrigation</h3>
                <p>Smart irrigation system that automatically waters your crops based on soil conditions.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3>Mobile Control</h3>
                <p>Control your farm's irrigation system from anywhere using your smartphone.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-seedling"></i>
                </div>
                <h3>Crop Prediction</h3>
                <p>Get AI-powered crop recommendations based on your soil conditions and climate data.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <i class="fas fa-microscope"></i>
                </div>
                <h3>Disease Detection</h3>
                <p>Detect plant diseases early using our advanced image recognition technology.</p>
            </div>
        </div>
    </div>

    <div class="benefits-section">
        <h2>Benefits</h2>
        <div class="benefits-grid">
            <div class="benefit-card">
                <i class="fas fa-water"></i>
                <h3>Water Conservation</h3>
                <p>Optimize water usage with smart irrigation scheduling and monitoring.</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-leaf"></i>
                <h3>Better Crop Health</h3>
                <p>Maintain optimal growing conditions with precise environmental control.</p>
            </div>
            <div class="benefit-card">
                <i class="fas fa-chart-pie"></i>
                <h3>Data Insights</h3>
                <p>Make informed decisions with comprehensive data analysis and trends.</p>
            </div>
        </div>
    </div>

    <div class="how-it-works">
        <h2>How It Works</h2>
        <div class="steps-container">
            <div class="step">
                <div class="step-number">1</div>
                <h3>Monitor</h3>
                <p>Track environmental conditions and water levels in real-time.</p>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <h3>Analyze</h3>
                <p>System analyzes data to determine optimal irrigation needs.</p>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <h3>Control</h3>
                <p>Automatically adjust irrigation based on sensor readings.</p>
            </div>
        </div>
    </div>

    <div class="cta-section">
        <h2>Ready to Get Started?</h2>
        <p>Begin monitoring and controlling your farm's irrigation system today.</p>
        <a href="dashboard.html" class="btn btn-primary">Go to Dashboard</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-auth.js";
        import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/11.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDL2h9dxXjU-2a6lEwK-iR2AL76FHLGc88",
            authDomain: "smartfarm-50e9f.firebaseapp.com",
            databaseURL: "https://smartfarm-50e9f-default-rtdb.firebaseio.com",
            projectId: "smartfarm-50e9f",
            storageBucket: "smartfarm-50e9f.firebasestorage.app",
            messagingSenderId: "615423373084",
            appId: "1:615423373084:web:e4af0444a7db2f9fa754d9",
            measurementId: "G-8TDXE1451F"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        const greetingSpan = document.getElementById('greeting');
        const logoutBtn = document.getElementById('logoutBtn');
        const mainHeading = document.getElementById('mainHeading');

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                // User is signed in
                logoutBtn.classList.remove('hidden');
                try {
                    const userProfileRef = ref(database, 'users/' + user.uid + '/profile');
                    const snapshot = await get(userProfileRef);
                    if (snapshot.exists()) {
                        const userData = snapshot.val();
                        greetingSpan.textContent = `Hello, ${userData.name}!`;
                        mainHeading.textContent = `Welcome, ${userData.name}!`;
                    } else {
                        greetingSpan.textContent = `Hello, ${user.email}!`;
                        mainHeading.textContent = `Welcome, ${user.email}!`;
                    }
                } catch (error) {
                    console.error('Error fetching user profile:', error);
                    greetingSpan.textContent = `Hello, ${user.email}!`;
                    mainHeading.textContent = `Welcome, ${user.email}!`;
                }
            } else {
                // User is signed out
                logoutBtn.classList.add('hidden');
                greetingSpan.textContent = '';
                mainHeading.textContent = 'Smart Irrigation System';
                window.location.href = 'login.html'; // Redirect to login page
            }
        });

        logoutBtn.addEventListener('click', async () => {
            try {
                await signOut(auth);
                // Redirection handled by onAuthStateChanged
            } catch (error) {
                console.error('Error logging out:', error);
                alert(`Logout failed: ${error.message}`);
            }
        });
    </script>

    <style>
        .features-section {
            padding: 4rem 2rem;
            background-color: #f8f9fa;
        }

        .features-section h2 {